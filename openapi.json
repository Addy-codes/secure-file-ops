{"openapi":"3.1.0","info":{"title":"Secure File OPS","description":"\nThis project implements a **highly secure file-sharing system** utilizing **FastAPI** and **MongoDB** for two distinct user roles: Operations (Ops) Users and Client Users.\n\nKey functionalities:\n- **Ops User**:\n  - Upload files restricted to `.pptx`, `.docx`, and `.xlsx` formats.\n  - Only authorized Ops Users are allowed to perform uploads.\n- **Client User**:\n  - Register with secure email verification flow.\n  - Access and download files via encrypted URLs.\n  - View a list of available files, ensuring controlled and secure access.\n\nSecurity highlights:\n- **JWT Authentication**: Ensures secure API access with role-based restrictions.\n- **Encrypted URLs**: Protects file downloads by generating secure, time-limited links.\n- **File Upload Restrictions**: Ensures only trusted file formats are uploaded, enhancing data security.\n","version":"0.0.1"},"paths":{"/auth/signup":{"post":{"summary":"Signup","description":"Create a new user account.\n\nArgs:\n    signup_request (SignupRequest): The user's signup information.\n\nReturns:\n    TokenResponse: An access token for the newly created user.\n\nRaises:\n    HTTPException: If the role is invalid.","operationId":"signup_auth_signup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"summary":"Login","description":"Authenticate a user and provide an access token.\n\nArgs:\n    login_request (LoginRequest): The user's login credentials.\n\nReturns:\n    TokenResponse: An access token for the authenticated user.\n\nRaises:\n    HTTPException: If the credentials are invalid.","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/resend-verification-email":{"post":{"summary":"Resend Verification Email","description":"Resend the verification email to the user.\n\nArgs:\n    user: The authenticated user (injected by the require_role dependency).\n\nReturns:\n    JSONResponse: A success message if the email is sent.\n\nRaises:\n    HTTPException: If there's an error sending the verification email.","operationId":"resend_verification_email_auth_resend_verification_email_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/auth/verify-email":{"get":{"summary":"Verify Email","description":"Verify a user's email address using the provided token.\n\nArgs:\n    token (str): The verification token sent to the user's email.\n\nReturns:\n    The result of the email verification process.","operationId":"verify_email_auth_verify_email_get","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/files/upload":{"post":{"summary":"Upload","description":"Upload a file to the server.\n\nArgs:\n    file (UploadFile): The file to be uploaded.\n    user: The authenticated user (injected by the require_role dependency).\n\nReturns:\n    The result of the file upload process.","operationId":"upload_files_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_files_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/files/download-link/{file_id}":{"get":{"summary":"Get Download Link","description":"Generate a download link for a file.\n\nArgs:\n    file_id (str): The ID of the file.\n\nReturns:\n    The generated download link for the file.","operationId":"get_download_link_files_download_link__file_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/files/download/{encrypted_link}":{"get":{"summary":"Download","description":"Download a file using an encrypted link.\n\nArgs:\n    encrypted_link (str): The encrypted link for the file.\n\nReturns:\n    The result of the file download process.","operationId":"download_files_download__encrypted_link__get","parameters":[{"name":"encrypted_link","in":"path","required":true,"schema":{"type":"string","title":"Encrypted Link"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/files/":{"get":{"summary":"List Files","description":"List all files with their creators.\n\nReturns:\n    A list of files with their creators.","operationId":"list_files_files__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_upload_files_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_files_upload_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest"},"SignupRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"role":{"type":"string","enum":["client","ops"],"title":"Role","description":"Role must be either 'client' or 'ops'"}},"type":"object","required":["email","password","role"],"title":"SignupRequest"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"TokenResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}